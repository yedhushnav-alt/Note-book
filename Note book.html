<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Digital Note Book</title>
    <!-- Using Google Fonts for a premium look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Header -->
    <header>
        <div class="header-actions">
            <button class="icon-btn" onclick="toggleModal('menuModal')">
                <svg viewBox="0 0 24 24">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                </svg>
            </button>
        </div>

        <!-- Page Controls -->
        <div class="page-controls" style="display: flex; align-items: center; gap: 8px;">
            <button class="icon-btn" onclick="prevPage()">
                <svg viewBox="0 0 24 24">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                </svg>
            </button>
            <span id="pageIndicator" style="font-weight:600; font-size: 0.9rem;">1/1</span>
            <button class="icon-btn" onclick="nextPage()">
                <svg viewBox="0 0 24 24">
                    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                </svg>
            </button>
            <button class="icon-btn" onclick="newPage()" style="margin-left:4px">
                <svg viewBox="0 0 24 24">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                </svg>
            </button>
        </div>

        <div class="header-title" id="pageTitle">Untitled</div>

        <div class="header-actions">
            <button class="icon-btn" onclick="undo()" id="btnUndo" disabled>
                <svg viewBox="0 0 24 24">
                    <path
                        d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
                </svg>
            </button>
            <button class="icon-btn" onclick="redo()" id="btnRedo" disabled>
                <svg viewBox="0 0 24 24">
                    <path
                        d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z" />
                </svg>
            </button>
            <button class="icon-btn" onclick="saveToGallery()" style="margin-left:8px; color: var(--primary-color);">
                <svg viewBox="0 0 24 24">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Workspace -->
    <div id="workspace">
        <div class="paper-container bg-grid" id="paper">
            <canvas id="canvas"></canvas>
        </div>
    </div>

    <!-- Menus/Modals -->
    <div id="menuModal" class="modal-overlay" onclick="if(event.target===this) toggleModal('menuModal')">
        <div class="modal">
            <h3>Paper Settings</h3>
            <button class="modal-btn" onclick="resizePaper('screen')">Fit to Screen</button>
            <button class="modal-btn" onclick="resizePaper('a4')">A4 Size (Printable)</button>
            <button class="modal-btn" onclick="resizePaper('infinite')">Long Scroll</button>

            <h3 style="margin-top:16px;">Background</h3>
            <button class="modal-btn" onclick="setPattern('bg-grid')">Grid</button>
            <button class="modal-btn" onclick="setPattern('bg-lines')">Lined</button>
            <button class="modal-btn" onclick="setPattern('bg-dots')">Dots</button>
            <button class="modal-btn" onclick="setPattern('')">Plain White</button>

            <button class="modal-btn modal-close" onclick="toggleModal('menuModal')">Close</button>
        </div>
    </div>

    <!-- Size Control Bar (Always visible or toggled, let's make it floating above) -->
    <div id="sizeBar" class="size-bar">
        <span id="sizeLabel" style="font-size:12px; font-weight:600; color:#555">Size: 3</span>
        <input type="range" min="1" max="100" value="3" id="strokeSlider" oninput="updateSettings()">
    </div>

    <!-- Popups -->
    <div id="stylePopup" class="popup-menu">
        <label>Color</label>
        <div class="color-grid">
            <div class="color-opt selected" style="background:#000000" onclick="setColor('#000000', this)"></div>
            <div class="color-opt" style="background:#ef4444" onclick="setColor('#ef4444', this)"></div>
            <div class="color-opt" style="background:#3b82f6" onclick="setColor('#3b82f6', this)"></div>
            <div class="color-opt" style="background:#22c55e" onclick="setColor('#22c55e', this)"></div>
            <div class="color-opt" style="background:#f59e0b" onclick="setColor('#f59e0b', this)"></div>
        </div>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
        <div class="tool-group">
            <button class="tool-btn active" id="toolPencil" onclick="setTool('pencil')">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                </svg>
            </button>
            <button class="tool-btn" id="toolEraser" onclick="setTool('eraser')">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M15.14 3c-.51 0-1.02.2-1.41.59L2.59 14.73c-.78.78-.78 2.05 0 2.83L5.17 20.1c.78.78 2.05.78 2.83 0l11.14-11.14c.79-.78.79-2.05 0-2.83l-2.58-2.58C16.16 3.2 15.65 3 15.14 3zM17 18h5v2h-5z" />
                </svg>
            </button> <!-- Eraser -->
        </div>

        <button class="tool-btn" onclick="togglePopup('stylePopup')" style="background:var(--text-color); color:white;">
            <svg viewBox="0 0 24 24">
                <path
                    d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />
            </svg>
        </button>
    </div>

    <!-- Cursor -->
    <div id="cursor-circle"></div>
    <script src="script.js"></script>
</body>

</html>